project(simon)
INCLUDE(InstallRequiredSystemLibraries)

SET(CPACK_PACKAGE_DESCRIPTION_SUMMARY "Open-Source Speech Recognition")
SET(CPACK_PACKAGE_VENDOR "Peter Grasch")
#SET(CPACK_PACKAGE_DESCRIPTION_FILE "${CMAKE_CURRENT_SOURCE_DIR}/ReadMe.txt")
SET(CPACK_RESOURCE_FILE_LICENSE "${CMAKE_CURRENT_SOURCE_DIR}/LICENCE.txt")
set(CPACK_PACKAGE_VERSION "0.2-alpha-2")
SET(CPACK_PACKAGE_VERSION_MAJOR "0")
SET(CPACK_PACKAGE_VERSION_MINOR "2")
SET(CPACK_PACKAGE_VERSION_PATCH "2")
SET(CPACK_PACKAGE_INSTALL_DIRECTORY "simon ${CPACK_PACKAGE_VERSION_MAJOR}.${CPACK_PACKAGE_VERSION_MINOR}")
SET(CPACK_STRIP_FILES TRUE)
SET(CPACK_SOURCE_STRIP_FILES TRUE)
set(CPACK_COMPONENTS_ALL kdecore julius juliusdevel ksimond ksimonddoc translations simoncommandaipluginaimlsalice
		simoncommandaipluginaimlsgerman simoncommandaiplugin simoncommanddesktopgridplugin simoncommanddictationplugin
		simoncommandexecutableplugin simoncommandplaceplugin simoncommandshortcutplugin simoncommandtextmacroplugin
		simon simond simonddoc simoncore simoncoredevel simondevel simondoc simonddevel)

SET(CPACK_COMPONENT_KDECORE_DISPLAY_NAME "KDE System Files")
SET(CPACK_COMPONENT_JULIUS_DISPLAY_NAME "Julius")
SET(CPACK_COMPONENT_JULIUSDEVEL_DISPLAY_NAME "Julius Development Files")
SET(CPACK_COMPONENT_KSIMOND_DISPLAY_NAME "ksimond")
SET(CPACK_COMPONENT_KSIMONDDOC_DISPLAY_NAME "KSimond Documentation")
SET(CPACK_COMPONENT_SIMONCOMMANDAIPLUGINAIMLSALICE_DISPLAY_NAME "AI: Alice AIMLS")
SET(CPACK_COMPONENT_SIMONCOMMANDAIPLUGINAIMLSGERMAN_DISPLAY_NAME "AI: German AIMLS")
SET(CPACK_COMPONENT_SIMONCOMMANDAIPLUGIN_DISPLAY_NAME "AI")
SET(CPACK_COMPONENT_SIMONCOMMANDDESKTOPGRIDPLUGIN_DISPLAY_NAME "Desktop Grid")
SET(CPACK_COMPONENT_SIMONCOMMANDDICTATIONPLUGIN_DISPLAY_NAME "Dictation")
SET(CPACK_COMPONENT_SIMONCOMMANDEXECUTABLEPLUGIN_DISPLAY_NAME "Executables")
SET(CPACK_COMPONENT_SIMONCOMMANDPLACEPLUGIN_DISPLAY_NAME "Place")
SET(CPACK_COMPONENT_SIMONCOMMANDSHORTCUTPLUGIN_DISPLAY_NAME "Shortcut")
SET(CPACK_COMPONENT_SIMONCOMMANDTEXTMACROPLUGIN_DISPLAY_NAME "Text-Macro")
SET(CPACK_COMPONENT_SIMON_DISPLAY_NAME "simon")
SET(CPACK_COMPONENT_SIMONDEVEL_DISPLAY_NAME "simon Development Files")
SET(CPACK_COMPONENT_SIMONDOC_DISPLAY_NAME "simon Documentation")
SET(CPACK_COMPONENT_SIMOND_DISPLAY_NAME "simond")
SET(CPACK_COMPONENT_SIMONDDEVEL_DISPLAY_NAME "simond Development Files")
SET(CPACK_COMPONENT_SIMONDDOC_DISPLAY_NAME "simond Documentation")
SET(CPACK_COMPONENT_SIMONCORE_DISPLAY_NAME "Shared Components")
SET(CPACK_COMPONENT_SIMONCOREDEVEL_DISPLAY_NAME "Shared Components Development Files")
SET(CPACK_COMPONENT_TRANSLATIONS_DISPLAY_NAME "Translations")



SET(CPACK_COMPONENT_KDECORE_DISPLAY_DESCRIPTION "This contains a subset of the kde system files needed to run simon / simond / ksimond.")
SET(CPACK_COMPONENT_JULIUS_DISPLAY_DESCRIPTION "The Julius Recognition Engine")
SET(CPACK_COMPONENT_JULIUSDEVEL_DISPLAY_DESCRIPTION "The Julius Recognition Engine Development Files")
SET(CPACK_COMPONENT_KSIMOND_DISPLAY_DESCRIPTION "A KDE4 Front-End to simond")
SET(CPACK_COMPONENT_KSIMONDDOC_DISPLAY_DESCRIPTION "Documentation for the KDE4 Front-End to simond")
SET(CPACK_COMPONENT_SIMONCOMMANDAIPLUGINAIMLSALICE_DISPLAY_DESCRIPTION "The Alice-Personality for the AI Command Plug-In")
SET(CPACK_COMPONENT_SIMONCOMMANDAIPLUGINAIMLSGERMAN_DISPLAY_DESCRIPTION "A German Personality for the AI Command Plug-In")
SET(CPACK_COMPONENT_SIMONCOMMANDAIPLUGIN_DISPLAY_DESCRIPTION "The AI Command Plug-In")
SET(CPACK_COMPONENT_SIMONCOMMANDDESKTOPGRIDPLUGIN_DISPLAY_DESCRIPTION "The Desktop Grid Command Plug-In")
SET(CPACK_COMPONENT_SIMONCOMMANDDICTATIONPLUGIN_DISPLAY_DESCRIPTION "The Dictation Command Plug-In")
SET(CPACK_COMPONENT_SIMONCOMMANDEXECUTABLEPLUGIN_DISPLAY_DESCRIPTION "The Executables Command Plug-In")
SET(CPACK_COMPONENT_SIMONCOMMANDPLACEPLUGIN_DISPLAY_DESCRIPTION "The Place Command Plug-In")
SET(CPACK_COMPONENT_SIMONCOMMANDSHORTCUTPLUGIN_DISPLAY_DESCRIPTION "The Shortcut Command Plug-In")
SET(CPACK_COMPONENT_SIMONCOMMANDTEXTMACROPLUGIN_DISPLAY_DESCRIPTION "The Text-Macro Command Plug-In")
SET(CPACK_COMPONENT_SIMON_DISPLAY_DESCRIPTION "The simon application; Acts as a client to the simond recognition server and provides means to manage the speech- and acoustic model.")
SET(CPACK_COMPONENT_SIMONDEVEL_DISPLAY_DESCRIPTION "The simon Development Files")
SET(CPACK_COMPONENT_SIMONDOC_DISPLAY_DESCRIPTION "The simon Documentation")
SET(CPACK_COMPONENT_SIMOND_DISPLAY_DESCRIPTION "The simond recognition server; Stores and compiles the models of the simon clients. Uses Julius for the recognition.")
SET(CPACK_COMPONENT_SIMONDDEVEL_DISPLAY_DESCRIPTION "Development Files for the simond recognition server")
SET(CPACK_COMPONENT_SIMONDDOC_DISPLAY_DESCRIPTION "Documentation for the simond recognition server")
SET(CPACK_COMPONENT_SIMONCORE_DISPLAY_DESCRIPTION "Required shared components.")
SET(CPACK_COMPONENT_SIMONCOREDEVEL_DISPLAY_DESCRIPTION "Development Files of the shared components")
SET(CPACK_COMPONENT_TRANSLATIONS_DISPLAY_DESCRIPTION "Translations of all the components.")


set(CPACK_COMPONENT_KSIMOND_DEPENDS simond )
set(CPACK_COMPONENT_SIMONCOMMANDAIPLUGINAIMLSALICE_DEPENDS simoncommandaiplugin )
set(CPACK_COMPONENT_SIMONCOMMANDAIPLUGINAIMLSGERMAN_DEPENDS simoncommandaiplugin )
set(CPACK_COMPONENT_SIMONCOMMANDAIPLUGIN_DEPENDS simon)
set(CPACK_COMPONENT_SIMONCOMMANDDESKTOPGRIDPLUGIN_DEPENDS simon)
set(CPACK_COMPONENT_SIMONCOMMANDDICTATIONPLUGIN_DEPENDS simon)
set(CPACK_COMPONENT_SIMONCOMMANDEXECUTABLEPLUGIN_DEPENDS simon)
set(CPACK_COMPONENT_SIMONCOMMANDPLACEPLUGIN_DEPENDS simon)
set(CPACK_COMPONENT_SIMONCOMMANDSHORTCUTPLUGIN_DEPENDS simon)
set(CPACK_COMPONENT_SIMONCOMMANDTEXTMACROPLUGIN_DEPENDS simon)
set(CPACK_COMPONENT_SIMON_DEPENDS simoncore)
set(CPACK_COMPONENT_SIMOND_DEPENDS simoncore)
set(CPACK_COMPONENT_KSIMOND_DEPENDS simoncore)
set(CPACK_COMPONENT_SIMONCORE_DEPENDS kdecore)



set(CPACK_COMPONENT_KDECORE_GROUP "Applications")
SET(CPACK_COMPONENT_JULIUS_GROUP "Applications")
SET(CPACK_COMPONENT_JULIUSDEVEL_GROUP "Development")
SET(CPACK_COMPONENT_KSIMOND_GROUP "Applications")
SET(CPACK_COMPONENT_KSIMONDDOC_GROUP "Documentation")
SET(CPACK_COMPONENT_SIMONCOMMANDAIPLUGINAIMLSALICE_GROUP "Commands")
SET(CPACK_COMPONENT_SIMONCOMMANDAIPLUGINAIMLSGERMAN_GROUP "Commands")
SET(CPACK_COMPONENT_SIMONCOMMANDAIPLUGIN_GROUP "Commands")
SET(CPACK_COMPONENT_SIMONCOMMANDDESKTOPGRIDPLUGIN_GROUP "Commands")
SET(CPACK_COMPONENT_SIMONCOMMANDDICTATIONPLUGIN_GROUP "Commands")
SET(CPACK_COMPONENT_SIMONCOMMANDEXECUTABLEPLUGIN_GROUP "Commands")
SET(CPACK_COMPONENT_SIMONCOMMANDPLACEPLUGIN_GROUP "Commands")
SET(CPACK_COMPONENT_SIMONCOMMANDSHORTCUTPLUGIN_GROUP "Commands")
SET(CPACK_COMPONENT_SIMONCOMMANDTEXTMACROPLUGIN_GROUP "Commands")
SET(CPACK_COMPONENT_SIMON_GROUP "Applications")
SET(CPACK_COMPONENT_SIMONDEVEL_GROUP "Development")
SET(CPACK_COMPONENT_SIMONDOC_GROUP "Documentation")
SET(CPACK_COMPONENT_SIMOND_GROUP "Applications")
SET(CPACK_COMPONENT_SIMONDDEVEL_GROUP "Development")
SET(CPACK_COMPONENT_SIMONDDOC_GROUP "Documentation")
SET(CPACK_COMPONENT_SIMONCORE_GROUP "Applications")
SET(CPACK_COMPONENT_SIMONCOREDEVEL_GROUP "Development")
SET(CPACK_COMPONENT_TRANSLATIONS_GROUP "Localization")

set(CPACK_COMPONENT_GROUP_DEVELOPMENT_DESCRIPTION
   "Development Files (Headers,...)")
set(CPACK_COMPONENT_GROUP_APPLICATIONS_DESCRIPTION
   "Runtime files. You will definitely want those if you want to use simon / simond or ksimond.")
set(CPACK_COMPONENT_GROUP_COMMANDS_DESCRIPTION
   "Command Plug-Ins. Those add actions to simon.")
set(CPACK_COMPONENT_GROUP_DOCUMENTATION_DESCRIPTION
   "Manuals and other documentation.")
set(CPACK_COMPONENT_GROUP_LOCALIZATION_DESCRIPTION
   "Translations and other localization files.")

   
set(CPACK_ALL_INSTALL_TYPES Full User Developer)


SET(CPACK_COMPONENT_KDECORE_INSTALL_TYPES Full User Developer)
SET(CPACK_COMPONENT_JULIUS_INSTALL_TYPES Full User Developer)
SET(CPACK_COMPONENT_JULIUSDEVEL_INSTALL_TYPES Developer)
SET(CPACK_COMPONENT_KSIMOND_INSTALL_TYPES Full User Developer)
SET(CPACK_COMPONENT_KSIMONDDOC_INSTALL_TYPES Full User)
SET(CPACK_COMPONENT_SIMONCOMMANDAIPLUGINAIMLSALICE_INSTALL_TYPES Full User)
SET(CPACK_COMPONENT_SIMONCOMMANDAIPLUGINAIMLSGERMAN_INSTALL_TYPES Full User)
SET(CPACK_COMPONENT_SIMONCOMMANDAIPLUGIN_INSTALL_TYPES Full User)
SET(CPACK_COMPONENT_SIMONCOMMANDDESKTOPGRIDPLUGIN_INSTALL_TYPES Full User)
SET(CPACK_COMPONENT_SIMONCOMMANDDICTATIONPLUGIN_INSTALL_TYPES Full User)
SET(CPACK_COMPONENT_SIMONCOMMANDEXECUTABLEPLUGIN_INSTALL_TYPES Full User)
SET(CPACK_COMPONENT_SIMONCOMMANDPLACEPLUGIN_INSTALL_TYPES Full User)
SET(CPACK_COMPONENT_SIMONCOMMANDSHORTCUTPLUGIN_INSTALL_TYPES Full User)
SET(CPACK_COMPONENT_SIMONCOMMANDTEXTMACROPLUGIN_INSTALL_TYPES Full User)
SET(CPACK_COMPONENT_SIMON_INSTALL_TYPES Full User Developer)
SET(CPACK_COMPONENT_SIMONDEVEL_INSTALL_TYPES Developer)
SET(CPACK_COMPONENT_SIMONDOC_INSTALL_TYPES Full User)
SET(CPACK_COMPONENT_SIMOND_INSTALL_TYPES Full User Developer)
SET(CPACK_COMPONENT_SIMONDDEVEL_INSTALL_TYPES Developer)
SET(CPACK_COMPONENT_SIMONDDOC_INSTALL_TYPES Full User)
SET(CPACK_COMPONENT_SIMONCORE_INSTALL_TYPES Full User Developer)
SET(CPACK_COMPONENT_SIMONCOREDEVEL_INSTALL_TYPES Developer)
SET(CPACK_COMPONENT_TRANSLATIONS_INSTALL_TYPES Full User)

SET(CPACK_COMPONENT_KDECORE_REQUIRED)
SET(CPACK_COMPONENT_SIMONCORE_REQUIRED)
SET(CPACK_COMPONENT_SIMONCOMMANDAIPLUGIN_DISABLED)
SET(CPACK_COMPONENT_SIMONCOMMANDAIPLUGINAIMLSALICE_DISABLED)
SET(CPACK_COMPONENT_SIMONCOMMANDAIPLUGINAIMLSGERMAN_DISABLED)


SET(CPACK_NSIS_MUI_ICON "${CMAKE_CURRENT_SOURCE_DIR}\\\\simon.ico")

IF(WIN32 AND NOT UNIX)
  # There is a bug in NSI that does not handle full unix paths properly. Make
  # sure there is at least one set of four (4) backlasshes.
  SET(CPACK_PACKAGE_ICON "${CMAKE_CURRENT_SOURCE_DIR}\\\\installbanner.bmp")
  #SET(CPACK_NSIS_INSTALLED_ICON_NAME "bin\\\\simon.exe")
  SET(CPACK_NSIS_DISPLAY_NAME "${CPACK_PACKAGE_INSTALL_DIRECTORY} simon")
  SET(CPACK_NSIS_HELP_LINK "http:\\\\\\\\www.simon-listens.org/wiki")
  SET(CPACK_NSIS_URL_INFO_ABOUT "http:\\\\\\\\www.simon-listens.com")
  SET(CPACK_NSIS_CONTACT "support@simon-listens.org")
  
  SET(CPACK_NSIS_CREATE_ICONS_EXTRA "CreateShortCut \\\"$SMPROGRAMS\\\\$STARTMENU_FOLDER\\\\simon.lnk\\\" \\\"$INSTDIR\\\\bin\\\\simon.exe\\\" \\\"\\\" \\\"$INSTDIR\\\\bin\\\\simon.exe\\\" 0
  CreateShortCut \\\"$SMPROGRAMS\\\\$STARTMENU_FOLDER\\\\simond.lnk\\\" \\\"$INSTDIR\\\\bin\\\\simond.exe\\\" \\\"\\\" \\\"$INSTDIR\\\\bin\\\\simond.exe\\\" 0
  CreateShortCut \\\"$SMPROGRAMS\\\\$STARTMENU_FOLDER\\\\ksimond.lnk\\\" \\\"$INSTDIR\\\\bin\\\\ksimond.exe\\\" \\\"\\\" \\\"$INSTDIR\\\\bin\\\\ksimond.exe\\\" 0")
  

    #set(CPACK_NSIS_CREATE_ICONS_EXTRA "CreateShortCut \\\"$SMPROGRAMS\\\\$STARTMENU_FOLDER\\\\aten.lnk\\\" \\\"$INSTDIR\\\\bin\\\\aten.exe\\\" \\\"\\\" \\\"$INSTDIR\\\\bin\\\\aten.ico\\\"
#      StrCmp $INSTALL_DESKTOP \\\"1\\\" 0 +2
#      CreateShortCut \\\"$DESKTOP\\\\aten.lnk\\\" \\\"$INSTDIR\\\\bin\\\\aten.exe\\\" \\\"\\\" \\\"$INSTDIR\\\\bin\\\\aten.ico\\\"
#"
#  )
  
	  SET(CPACK_NSIS_DELETE_ICONS_EXTRA "
	    !insertmacro MUI_STARTMENU_GETFOLDER Application $MUI_TEMP
	    Delete \\\"$SMPROGRAMS\\\\$MUI_TEMP\\\\simon.lnk\\\"
	    Delete \\\"$SMPROGRAMS\\\\$MUI_TEMP\\\\simond.lnk\\\"
	    Delete \\\"$SMPROGRAMS\\\\$MUI_TEMP\\\\ksimond.lnk\\\"
	    ")
ENDIF(WIN32 AND NOT UNIX)

SET(CPACK_PACKAGE_EXECUTABLES "simon" "simon")

include(CPack)
find_package(KDE4 REQUIRED)
cmake_minimum_required(VERSION 2.6)

set(CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/cmake ${CMAKE_MODULE_PATH})

add_subdirectory(julius)
add_subdirectory(simonlib)
add_subdirectory(simon)
add_subdirectory(simond)
add_subdirectory(ksimond)
add_subdirectory(plugins)

if(WIN32)
add_subdirectory(KDE)
ENDIF(WIN32)
